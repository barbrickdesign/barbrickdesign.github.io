<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https:;">
    <meta name="referrer" content="strict-origin">
    
    <title>BARBRICKDESIGN - Elite Web3 Hub</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="universal-wallet-auth.js" as="script">
    <link rel="preload" href="auth-integration.js" as="script">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical CSS Inlined -->
    <style id="critical-css">
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
            background: #000000;
            color: #00ffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Loading state */
        #app-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.3s ease-out;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(0, 255, 255, 0.2);
            border-radius: 50%;
            border-top-color: #00ffff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Basic layout */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        /* Grid system */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        /* Project cards */
        .project-card {
            background: rgba(0, 20, 40, 0.7);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 255, 255, 0.2);
        }
        
        .project-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .project-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #00ffff;
        }
        
        .project-desc {
            color: #8addff;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        /* Status indicators */
        .status-active, .status-inactive {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: bold;
        }
        
        .status-active {
            background: rgba(0, 255, 0, 0.2);
            color: #00ff00;
        }
        
        .status-inactive {
            background: rgba(255, 0, 0, 0.2);
            color: #ff0000;
        }
    </style>
    
    <!-- Non-critical CSS -->
    <link rel="preload" href="wallet-button.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="wallet-button.css"></noscript>
    
    <!-- Load fonts with font-display: swap -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" media="print" onload="this.media='all'">
    
    <!-- Deferred JavaScript -->
    <script src="universal-wallet-auth.js" defer defer></script>
    <script src="auth-integration.js" defer defer></script>
    <script src="wallet-button.js" defer defer></script>
    <script src="auth-bootstrap.js" defer defer></script>
    <script src="fpds-contract-schema.js" defer defer></script>
    <script src="samgov-integration.js" defer defer></script>
    <script src="samgov-api-integration.js" defer defer></script>
    <script src="agent-types.js" defer defer></script>
    <script src="monitoring-systems.js" defer defer></script>
    <script src="agent-core.js" defer defer></script>
    <script src="agent-system.js" defer defer></script>
    <script src="agent-display.js" defer defer></script>
    
    <!-- Preload hero image -->
    <link rel="preload" href="header.jpg" as="image">
    
    <!-- PWA Support -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="BARBRICKDESIGN - Elite Web3 Development and Design">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://barbrickdesign.github.io/">
    <meta property="og:title" content="BARBRICKDESIGN - Elite Web3 Hub">
    <meta property="og:description" content="Cutting-edge Web3 development and design solutions">
    <meta property="og:image" content="https://barbrickdesign.github.io/header.jpg">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://barbrickdesign.github.io/">
    <meta name="twitter:title" content="BARBRICKDESIGN - Elite Web3 Hub">
    <meta name="twitter:description" content="Cutting-edge Web3 development and design solutions">
    <meta name="twitter:image" content="https://barbrickdesign.github.io/header.jpg">
</head>
<body>
    <!-- Loading overlay -->
    <div id="app-loading">
        <div class="loading-spinner"></div>
    </div>
    
    <div class="tron-grid"></div>
    
    <div class="container">
        <header>
            <div class="page-timestamp">
                <span class="timestamp-label">üìÖ Updated:</span>
                <span class="timestamp-value" id="pageTimestamp"></span>
            </div>
            <h1>BARBRICK<span style="color: #ff00ff;">DESIGN</span></h1>
            <p class="tagline">Elite Web3 Development & Design</p>
            
            <!-- Wallet Connect Button -->
            <div id="wallet-button-container" style="margin: 20px 0;"></div>
        </header>
        
        <!-- Project Grid -->
        <h2 class="section-title">üöÄ FEATURED PROJECTS</h2>
        <div class="grid">
            <div class="project-card" onclick="window.location.href='mandem.os/workspace/index.html'">
                <div class="project-icon">üåç</div>
                <div class="project-title">Gem Bot Universe</div>
                <div class="project-desc">Interactive 3D globe with satellite navigation. Real-time Web3 features for the Gem Bot Project.</div>
                <span class="status-active">‚óè ONLINE</span>
            </div>
            
            <!-- More project cards... -->
        </div>
        
        <!-- Agent Monitoring Section -->
        <h2 class="section-title">ü§ñ AGENT MONITORING SYSTEM</h2>
        <div class="grid">
            <div class="project-card agent-status-card" id="agent-status-card">
                <div class="agent-header">
                    <div class="project-icon" id="agent-status-icon">üîÑ</div>
                    <div class="agent-title-section">
                        <div class="project-title">Agent Status</div>
                        <div class="agent-status" id="agent-status">Initializing...</div>
                    </div>
                </div>
                <div class="agent-stats" id="agent-stats">
                    <!-- Stats will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="project-card agent-errors-card" id="agent-errors-card">
                <div class="errors-header">
                    <div class="project-icon">‚ùå</div>
                    <div class="errors-title">
                        <div class="project-title">Error Monitor</div>
                        <div class="errors-count" id="errors-count">0 active issues</div>
                    </div>
                </div>
                <div class="errors-list" id="errors-list">
                    <!-- Errors will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <footer>
            <p style="color: #8addff;">All systems operational | <a href="ALL-REPOS-HUB.md" style="color: #ff00ff;">View All 31+ Repositories</a></p>
        </footer>
    </div>

    <!-- Portfolio Ticker -->
    <div class="portfolio-ticker" id="portfolioTicker" style="display: none;">
        <div class="ticker-content">
            <!-- Ticker content will be populated by JavaScript -->
        </div>
    </div>

    <!-- Load non-critical JavaScript -->
    <script>
    // Remove loading spinner when page is fully loaded
    window.addEventListener('load', function() {
        const loading = document.getElementById('app-loading');
        if (loading) {
            loading.style.opacity = '0';
            setTimeout(() => {
                loading.style.display = 'none';
                // Remove critical CSS after page load
                const criticalCSS = document.getElementById('critical-css');
                if (criticalCSS) criticalCSS.disabled = true;
            }, 300);
        }
        
        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw-enhanced.js')
                    .then(registration => {
                        })
                    .catch(err => {
                        console.error('ServiceWorker registration failed: ', err);
                    });
            });
        }
        
        // Initialize page timestamp
        function updatePageTimestamp() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true,
                timeZoneName: 'short'
            };
            document.getElementById('pageTimestamp').textContent = now.toLocaleString('en-US', options);
        }
        
        updatePageTimestamp();
        
        // Initialize auth system
        window.authIntegration.init({
            showUI: true,
            onAuthSuccess: function(authInfo) {
                // Update UI based on auth status
            },
            onAuthFail: function() {
                }
        });
        
        // Initialize agent monitoring
        if (window.initializeAgentDisplay) {
            initializeAgentDisplay();
        }
        
        // Initialize portfolio ticker
        if (window.loadPortfolioTicker) {
            loadPortfolioTicker();
        }
    });
    
    // Handle offline/online events
    window.addEventListener('online', () => {
        if (window.registerBackgroundSync) {
            registerBackgroundSync();
        }
    });
    
    window.addEventListener('offline', () => {
        console.warn('Connection lost. Working in offline mode.');
    });
    
    // Error handling
    window.addEventListener('error', function(event) {
        console.error('Uncaught error:', event.error);
        // Send error to monitoring service
        if (window.trackError) {
            trackError({
                message: event.message,
                source: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                error: event.error
            });
        }
    });
    
    // Unhandled promise rejections
    window.addEventListener('unhandledrejection', function(event) {
        console.error('Unhandled promise rejection:', event.reason);
        // Send error to monitoring service
        if (window.trackError) {
            trackError({
                message: 'Unhandled Promise Rejection',
                error: event.reason
            });
        }
    });
    </script>
    
    <!-- NoScript fallback -->
    <noscript>
        <div style="position: fixed; top: 0; left: 0; right: 0; background: #ff0000; color: white; padding: 1rem; text-align: center; z-index: 10000;">
            JavaScript is required to run this application. Please enable JavaScript to continue.
        </div>
    </noscript>
</body>
</html>
