<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gem Bot Universe - Future Knowledge Hub</title>
    <meta name="description" content="Advanced AI-driven knowledge platform for creative professionals and innovators">

    <!-- Cyberpunk Theme CSS -->
    <style>
        :root {
            --neon-blue: #00ffff;
            --neon-pink: #ff1493;
            --neon-green: #00ff88;
            --neon-orange: #ff6b35;
            --dark-bg: #0a0a0a;
            --darker-bg: #050505;
            --panel-bg: rgba(20, 20, 20, 0.95);
            --text-glow: 0 0 10px var(--neon-blue);
            --border-glow: 0 0 15px var(--neon-blue);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--darker-bg) 100%);
            color: var(--neon-blue);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 50%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 20, 147, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(0, 255, 136, 0.1) 0%, transparent 50%);
            animation: backgroundShift 20s ease-in-out infinite alternate;
            z-index: -1;
        }

        @keyframes backgroundShift {
            0% { transform: scale(1) rotate(0deg); }
            100% { transform: scale(1.1) rotate(1deg); }
        }

        /* Header */
        header {
            position: relative;
            padding: 2rem;
            text-align: center;
            border-bottom: 1px solid var(--neon-blue);
            box-shadow: var(--border-glow);
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 3rem;
            font-weight: bold;
            text-shadow: var(--text-glow);
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink), var(--neon-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-desc {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        /* Navigation */
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-card {
            background: var(--panel-bg);
            border: 1px solid var(--neon-blue);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.1);
        }

        .nav-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--border-glow);
            border-color: var(--neon-pink);
        }

        .nav-card h3 {
            color: var(--neon-green);
            margin-bottom: 0.5rem;
            font-size: 1.4rem;
        }

        .nav-card p {
            color: var(--neon-blue);
            opacity: 0.8;
            font-size: 0.9rem;
        }

        /* Status Panel */
        .status-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--panel-bg);
            border: 1px solid var(--neon-green);
            border-radius: 8px;
            padding: 1rem;
            min-width: 250px;
            box-shadow: var(--border-glow);
            backdrop-filter: blur(10px);
            z-index: 1000;
        }

        .status-panel h4 {
            color: var(--neon-green);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.3rem;
            font-size: 0.8rem;
        }

        .status-value {
            color: var(--neon-blue);
        }

        .status-active {
            color: var(--neon-green);
        }

        /* 3D Container */
        #globe-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
        }

        /* Content Panels */
        .content-panel {
            background: var(--panel-bg);
            border: 1px solid var(--neon-blue);
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 1000px;
            box-shadow: var(--border-glow);
            backdrop-filter: blur(10px);
        }

        .content-panel h2 {
            color: var(--neon-pink);
            margin-bottom: 1rem;
            text-align: center;
            text-shadow: var(--text-glow);
        }

        /* Buttons */
        .cyber-btn {
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink));
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            color: black;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
            box-shadow: var(--border-glow);
        }

        .cyber-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--neon-pink);
        }

        .cyber-btn-secondary {
            background: transparent;
            border: 1px solid var(--neon-green);
            color: var(--neon-green);
        }

        .cyber-btn-secondary:hover {
            background: var(--neon-green);
            color: black;
        }

        /* Agent Cards */
        .agent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .agent-card {
            background: var(--panel-bg);
            border: 1px solid var(--neon-orange);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.2);
        }

        .agent-card h3 {
            color: var(--neon-orange);
            margin-bottom: 0.5rem;
            text-shadow: 0 0 10px var(--neon-orange);
        }

        .agent-card p {
            color: var(--neon-blue);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .agent-status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-supreme {
            background: rgba(255, 107, 53, 0.8);
            color: white;
        }

        .status-specialist {
            background: rgba(0, 255, 153, 0.8);
            color: black;
        }

        .status-knowledge {
            background: rgba(65, 105, 225, 0.8);
            color: white;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            border-top: 1px solid var(--neon-blue);
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        footer p {
            color: var(--neon-blue);
            opacity: 0.7;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .status-panel {
                position: static;
                margin: 1rem;
                min-width: auto;
            }

            h1 {
                font-size: 2rem;
            }

            .content-panel {
                margin: 1rem;
                padding: 1rem;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--neon-blue);
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>

    <!-- Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.95.8/lib/index.iife.min.js"></script>
    <script src="src/core/universal-wallet-auth.js"></script>
    <script src="src/ai/security-manager.js"></script>
    <script src="src/ai/agent-mappings.js"></script>
    <script src="src/ai/openai-orchestrator.js"></script>
    <script src="src/core/auth-integration.js"></script>
    <script src="src/utils/shared-utilities.js"></script>
    <script src="src/ui/wallet-button.js"></script>
    <script src="src/utils/content-sharing-manager.js"></script>
    <script src="src/utils/tutorial-video-generator.js"></script>
    <link rel="stylesheet" href="src/ui/wallet-button.css">
</head>
<body>
    <!-- Header -->
    <header>
        <h1>GEM BOT UNIVERSE</h1>
        <p class="header-desc">Advanced AI Knowledge Platform • Future Innovation Hub</p>
        <div style="margin-top: 1rem;">
            <button class="cyber-btn" onclick="toggleMissionControl()">MISSION CONTROL</button>
        </div>
    </header>

    <!-- 3D Globe Container -->
    <div id="globe-container"></div>

    <!-- Status Panel -->
    <div class="status-panel">
        <h4>SYSTEM STATUS</h4>
        <div class="status-item">
            <span>AI Core:</span>
            <span class="status-value status-active">ONLINE</span>
        </div>
        <div class="status-item">
            <span>Agent Network:</span>
            <span class="status-value status-active">ACTIVE</span>
        </div>
        <div class="status-item">
            <span>Knowledge Base:</span>
            <span class="status-value status-active">LOADED</span>
        </div>
        <div class="status-item">
            <span>IP Protection:</span>
            <span class="status-value status-active">ENABLED</span>
        </div>
    </div>

    <!-- Mission Control Panel -->
    <div id="missionControl" class="content-panel" style="display: none;">
        <h2>MISSION CONTROL</h2>

        <!-- Agent Network -->
        <div style="margin-bottom: 2rem;">
            <h3 style="color: var(--neon-pink); margin-bottom: 1rem;">AGENT NETWORK</h3>
            <div class="agent-grid">
                <div class="agent-card">
                    <h3>Austin Moore</h3>
                    <p>Supreme Inventor • Original MGC Merlin Creator</p>
                    <span class="agent-status status-supreme">SUPREME ACCESS</span>
                    <div style="margin-top: 1rem;">
                        <button class="cyber-btn" onclick="openAustinPortal()">Access Portal</button>
                    </div>
                </div>

                <div class="agent-card">
                    <h3>Arya</h3>
                    <p>Enhancement Specialist • Art-Technology Fusion</p>
                    <span class="agent-status status-specialist">ENHANCEMENT ACCESS</span>
                    <div style="margin-top: 1rem;">
                        <button class="cyber-btn" onclick="openAryaPortal()">Access Portal</button>
                    </div>
                </div>

                <div class="agent-card">
                    <h3>Andy Acker</h3>
                    <p>Knowledge Base Agent • Quality Assurance</p>
                    <span class="agent-status status-knowledge">KNOWLEDGE ACCESS</span>
                    <div style="margin-top: 1rem;">
                        <button class="cyber-btn" onclick="openAndyPortal()">Access Portal</button>
                    </div>
                </div>

                <div class="agent-card">
                    <h3>Ryan Barbrick</h3>
                    <p>Vision Architect • System Integration</p>
                    <span class="agent-status status-supreme">ARCHITECT ACCESS</span>
                    <div style="margin-top: 1rem;">
                        <button class="cyber-btn" onclick="openRyanPortal()">Access Portal</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Grid -->
        <div class="nav-grid">
            <div class="nav-card" onclick="navigateTo('laboratory')">
                <h3>🏭 LABORATORY</h3>
                <p>Research & Development Hub</p>
            </div>

            <div class="nav-card" onclick="navigateTo('warehouse')">
                <h3>🏗️ WAREHOUSE</h3>
                <p>Storage & Inventory Management</p>
            </div>

            <div class="nav-card" onclick="navigateTo('explorer')">
                <h3>🗺️ EXPLORER</h3>
                <p>Real-world Navigation Systems</p>
            </div>

            <div class="nav-card" onclick="navigateTo('grand-exchange')">
                <h3>⚔️ GRAND EXCHANGE</h3>
                <p>Trading & Marketplace Platform</p>
            </div>

            <div class="nav-card" onclick="openEducation()">
                <h3>🎓 EDUCATION</h3>
                <p>Comprehensive Training Programs</p>
            </div>

            <div class="nav-card" onclick="openIPFramework()">
                <h3>📋 IP FRAMEWORK</h3>
                <p>Intellectual Property Management</p>
            </div>
        </div>

        <!-- Quick Actions -->
        <div style="text-align: center; margin-top: 2rem;">
            <button class="cyber-btn" onclick="activateWizardMode()">🎭 ACTIVATE WIZARD MODE</button>
            <button class="cyber-btn cyber-btn-secondary" onclick="runSystemDiagnostics()">🔍 SYSTEM DIAGNOSTICS</button>
        </div>

        <!-- AI Integration -->
        <div style="margin-top: 2rem;">
            <h3 style="color: var(--neon-green); margin-bottom: 1rem;">🤖 AI ASSISTANT</h3>
            <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                <input type="password" id="apiKeyInput" placeholder="Enter OpenAI API Key" class="cyber-input" style="flex: 1; padding: 10px; background: var(--panel-bg); border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 5px;">
                <button class="cyber-btn" onclick="setApiKey()">Set API Key</button>
            </div>
            <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                <select id="agentSelect" class="cyber-input" style="padding: 10px; background: var(--panel-bg); border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 5px;">
                    <option value="governor">Governor Agent</option>
                    <option value="scout">Scout Agent</option>
                    <option value="archivist">Archivist Agent</option>
                    <option value="artist">Artist Agent</option>
                </select>
                <input type="text" id="promptInput" placeholder="Enter your prompt..." class="cyber-input" style="flex: 1; padding: 10px; background: var(--panel-bg); border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 5px;">
                <button class="cyber-btn" onclick="sendPrompt()">Send</button>
            </div>
            <div id="responseArea" style="background: var(--panel-bg); border: 1px solid var(--neon-green); padding: 1rem; border-radius: 5px; min-height: 100px; color: var(--neon-green); font-family: monospace;"></div>
        </div>

        <!-- Sora 2 Live Helper Feeds -->
        <div style="margin-top: 2rem;">
            <h3 style="color: var(--neon-orange); margin-bottom: 1rem;">🎬 SORA 2 LIVE HELPER EMBODIMENTS</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                
                <!-- Austin Moore Embodiment -->
                <div class="helper-feed-card">
                    <h4>🏆 Austin Moore - Supreme Inventor</h4>
                    <div id="austin-status" class="embodiment-status">○ INACTIVE</div>
                    <div class="video-embodiment" style="background: var(--panel-bg); border: 1px solid var(--neon-orange); border-radius: 10px; padding: 1rem; margin-bottom: 1rem;">
                        <div id="austin-video" class="sora-video-feed" style="width: 100%; height: 200px; background: linear-gradient(45deg, var(--neon-orange), #ff8c00); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; position: relative; overflow: hidden;">
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">🏆</div>
                                <div>Austin Moore</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">Sora 2 Embodiment Active</div>
                            </div>
                            <!-- Placeholder for Sora-generated video -->
                            <iframe id="austin-sora-video" style="display: none; width: 100%; height: 100%; border: none; border-radius: 8px;" src="" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="helper-controls">
                        <button class="cyber-btn" onclick="activateAustinHelper()">🎥 Activate Feed</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="chatWithAustin()">💬 Chat</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="getAustinGuidance()">🧠 Get Guidance</button>
                    </div>
                </div>

                <!-- Arya Embodiment -->
                <div class="helper-feed-card">
                    <h4>🎨 Arya - Enhancement Specialist</h4>
                    <div id="arya-status" class="embodiment-status">○ INACTIVE</div>
                    <div class="video-embodiment" style="background: var(--panel-bg); border: 1px solid var(--neon-pink); border-radius: 10px; padding: 1rem; margin-bottom: 1rem;">
                        <div id="arya-video" class="sora-video-feed" style="width: 100%; height: 200px; background: linear-gradient(45deg, var(--neon-pink), #ff69b4); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; position: relative; overflow: hidden;">
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">🎨</div>
                                <div>Arya</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">Sora 2 Embodiment Active</div>
                            </div>
                            <iframe id="arya-sora-video" style="display: none; width: 100%; height: 100%; border: none; border-radius: 8px;" src="" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="helper-controls">
                        <button class="cyber-btn" onclick="activateAryaHelper()">🎥 Activate Feed</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="chatWithArya()">💬 Chat</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="getAryaEnhancement()">✨ Get Enhancement</button>
                    </div>
                </div>

                <!-- Andy Acker Embodiment -->
                <div class="helper-feed-card">
                    <h4>🧠 Andy Acker - Knowledge Base Agent</h4>
                    <div id="andy-status" class="embodiment-status">○ INACTIVE</div>
                    <div class="video-embodiment" style="background: var(--panel-bg); border: 1px solid var(--neon-blue); border-radius: 10px; padding: 1rem; margin-bottom: 1rem;">
                        <div id="andy-video" class="sora-video-feed" style="width: 100%; height: 200px; background: linear-gradient(45deg, var(--neon-blue), #4169e1); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; position: relative; overflow: hidden;">
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">🧠</div>
                                <div>Andy Acker</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">Sora 2 Embodiment Active</div>
                            </div>
                            <iframe id="andy-sora-video" style="display: none; width: 100%; height: 100%; border: none; border-radius: 8px;" src="" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="helper-controls">
                        <button class="cyber-btn" onclick="activateAndyHelper()">🎥 Activate Feed</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="chatWithAndy()">💬 Chat</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="getAndyKnowledge()">📚 Get Knowledge</button>
                    </div>
                </div>

                <!-- Ryan Barbrick Embodiment -->
                <div class="helper-feed-card">
                    <h4>⚡ Ryan Barbrick - Vision Architect</h4>
                    <div id="ryan-status" class="embodiment-status">○ INACTIVE</div>
                    <div class="video-embodiment" style="background: var(--panel-bg); border: 1px solid var(--neon-green); border-radius: 10px; padding: 1rem; margin-bottom: 1rem;">
                        <div id="ryan-video" class="sora-video-feed" style="width: 100%; height: 200px; background: linear-gradient(45deg, var(--neon-green), #32cd32); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; position: relative; overflow: hidden;">
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">⚡</div>
                                <div>Ryan Barbrick</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">Sora 2 Embodiment Active</div>
                            </div>
                            <iframe id="ryan-sora-video" style="display: none; width: 100%; height: 100%; border: none; border-radius: 8px;" src="" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="helper-controls">
                        <button class="cyber-btn" onclick="activateRyanHelper()">🎥 Activate Feed</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="chatWithRyan()">💬 Chat</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="getRyanVision()">🔮 Get Vision</button>
                    </div>
        <!-- Agent Customization Hub -->
        <div style="margin-top: 2rem;">
            <h3 style="color: var(--neon-purple); margin-bottom: 1rem;">🧙‍♂️ GRAND WIZARD REALM CONTROL</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                
                <!-- Agent Appearance Customization -->
                <div class="wizard-control-card">
                    <h4>🎨 Agent Appearance Hub</h4>
                    <p>Customize agent costumes, colors, and visual styles</p>
                    <select id="agentSelector" style="width: 100%; padding: 8px; margin-bottom: 10px; background: var(--panel-bg); border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 5px;">
                        <option value="austin">Austin Moore</option>
                        <option value="arya">Arya</option>
                        <option value="andy">Andy Acker</option>
                        <option value="ryan">Ryan Barbrick</option>
                    </select>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px;">
                        <div>
                            <label style="font-size: 0.8rem; color: var(--neon-blue);">Costume:</label>
                            <select id="costumeSelect" style="width: 100%; padding: 5px; background: var(--panel-bg); border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 3px;">
                                <option value="wizard">Classic Wizard</option>
                                <option value="cyberpunk">Cyberpunk Hacker</option>
                                <option value="business">Business Professional</option>
                                <option value="creative">Creative Artist</option>
                                <option value="scientist">Mad Scientist</option>
                            </select>
                        </div>
                        <div>
                            <label style="font-size: 0.8rem; color: var(--neon-blue);">Color Theme:</label>
                            <input type="color" id="colorPicker" value="#ff6b35" style="width: 100%; height: 32px; border: 1px solid var(--neon-blue); border-radius: 3px;">
                        </div>
                    </div>
                    <button class="cyber-btn" onclick="applyAgentCustomization()">✨ Apply Changes</button>
                </div>

                <!-- Realm Control Panel -->
                <div class="wizard-control-card">
                    <h4>⚡ Realm Mastery Control</h4>
                    <p>Control all realms as Grand Wizard</p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px;">
                        <button class="cyber-btn cyber-btn-secondary" onclick="activateAllEmbodiments()">🎬 Activate All</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="deactivateAllEmbodiments()">⏹️ Deactivate All</button>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px;">
                        <button class="cyber-btn cyber-btn-secondary" onclick="regenerateAllSoraVideos()">🔄 Regenerate Videos</button>
                        <button class="cyber-btn cyber-btn-secondary" onclick="syncAllWizards()">🔗 Sync Wizards</button>
                    </div>
                    <button class="cyber-btn" onclick="enterGrandWizardMode()">👑 Enter Grand Wizard Mode</button>
                </div>

                <!-- Wizard Status Dashboard -->
                <div class="wizard-control-card">
                    <h4>📊 Wizard Status Dashboard</h4>
                    <div id="wizardStatusDisplay" style="font-family: monospace; font-size: 0.8rem; color: var(--neon-green); margin-bottom: 10px;">
                        Loading wizard status...
                    </div>
                    <button class="cyber-btn cyber-btn-secondary" onclick="refreshWizardStatus()">🔄 Refresh Status</button>
                </div>

                <!-- Sora Video Customization -->
                <div class="wizard-control-card">
                    <h4>🎬 Sora Video Customization</h4>
                    <p>Customize Sora-generated video prompts</p>
                    <textarea id="soraPromptInput" placeholder="Describe the video embodiment..." style="width: 100%; height: 60px; background: var(--panel-bg); border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 5px; padding: 8px; margin-bottom: 10px; resize: vertical;"></textarea>
                    <button class="cyber-btn" onclick="generateCustomSoraVideo()">🎬 Generate Custom Video</button>
        <!-- Content Library -->
        <div style="margin-top: 2rem;">
            <h3 style="color: var(--neon-purple); margin-bottom: 1rem;">📚 CONTENT LIBRARY</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                
                <!-- Library Access -->
                <div class="wizard-control-card">
                    <h4>🔓 Access Library</h4>
                    <p>Browse shared content from all projects</p>
                    <button class="cyber-btn" onclick="openContentLibrary()">Open Library</button>
                </div>

                <!-- Content Stats -->
                <div class="wizard-control-card">
                    <h4>📊 Library Stats</h4>
                    <div id="contentStats" style="font-family: monospace; font-size: 0.8rem; color: var(--neon-green); margin-bottom: 10px;">
                        Loading stats...
                    </div>
                    <button class="cyber-btn cyber-btn-secondary" onclick="refreshContentStats()">🔄 Refresh</button>
                </div>

                <!-- Share Content -->
                <div class="wizard-control-card">
                    <h4>📤 Share Content</h4>
                    <p>Share generated content with team</p>
                    <select id="shareUserSelect" style="width: 100%; padding: 5px; margin-bottom: 10px; background: var(--panel-bg); border: 1px solid var(--neon-blue); color: var(--neon-blue); border-radius: 3px;">
                        <option value="austin">Austin Moore</option>
                        <option value="arya">Arya</option>
                        <option value="andy">Andy Acker</option>
                        <option value="ryan">Ryan Barbrick</option>
                    </select>
                    <button class="cyber-btn" onclick="shareRecentContent()">Share Recent</button>
                </div>

                <!-- Export Library -->
                <div class="wizard-control-card">
                    <h4>💾 Export Data</h4>
                    <p>Download content library</p>
                    <button class="cyber-btn cyber-btn-secondary" onclick="exportContentLibrary()">Export JSON</button>
                </div>
            </div>
        </div>

        <!-- Tutorial Video Studio -->
        <div style="margin-top: 2rem;">
            <h3 style="color: var(--neon-green); margin-bottom: 1rem;">🎬 TUTORIAL VIDEO STUDIO</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                
                <!-- Assembly Tutorial -->
                <div class="wizard-control-card">
                    <h4>🔧 Assembly Tutorial</h4>
                    <p>Step-by-step gem bot assembly guide</p>
                    <div style="font-size: 0.8rem; color: var(--neon-blue); margin-bottom: 10px;">Duration: 5min</div>
                    <button class="cyber-btn" onclick="generateAssemblyTutorial()">Generate Video</button>
                </div>

                <!-- Jewelry Tutorial -->
                <div class="wizard-control-card">
                    <h4>💎 Jewelry Tutorial</h4>
                    <p>Creative jewelry design techniques</p>
                    <div style="font-size: 0.8rem; color: var(--neon-blue); margin-bottom: 10px;">Duration: 8min</div>
                    <button class="cyber-btn" onclick="generateJewelryTutorial()">Generate Video</button>
                </div>

                <!-- Sales Tutorial -->
                <div class="wizard-control-card">
                    <h4>💰 Sales Tutorial</h4>
                    <p>Professional selling strategies</p>
                    <div style="font-size: 0.8rem; color: var(--neon-blue); margin-bottom: 10px;">Duration: 6min</div>
                    <button class="cyber-btn" onclick="generateSalesTutorial()">Generate Video</button>
                </div>

                <!-- Advanced Tutorial -->
                <div class="wizard-control-card">
                    <h4>🚀 Advanced Tutorial</h4>
                    <p>Expert-level techniques</p>
                    <div style="font-size: 0.8rem; color: var(--neon-blue); margin-bottom: 10px;">Duration: 10min</div>
                    <button class="cyber-btn" onclick="generateAdvancedTutorial()">Generate Video</button>
                </div>
            </div>

            <!-- Tutorial Controls -->
            <div style="margin-top: 1rem; text-align: center;">
                <button class="cyber-btn" onclick="generateAllTutorials()">🎬 Generate All Tutorials</button>
                <button class="cyber-btn cyber-btn-secondary" onclick="createTutorialPlaylist()">📋 Create Learning Playlist</button>
            </div>
        </div>
        let scene, camera, renderer, controls;
        let earth, satellites = [], labels = [];
        let wizards = [], wizardMode = false;

        // Initialize 3D Scene - TRON CINEMA LEVEL
        function initScene() {
            // Scene setup with cinematic atmosphere
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x000000, 50, 200); // Atmospheric fog

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({
                antialias: true,
                alpha: true,
                powerPreference: "high-performance"
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); // Performance optimization
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;

            const container = document.getElementById('globe-container');
            container.appendChild(renderer.domElement);

            // Cinematic lighting setup
            setupTronLighting();

            // Create the iconic TRON grid floor
            createTronGrid();

            // Create Earth with enhanced materials
            createEnhancedEarth();

            // Camera position with cinematic framing
            camera.position.set(0, 15, 25);

            // Advanced controls with cinematic presets
            setupCinematicControls();

            // Create orbital satellites with TRON aesthetics
            createTronSatellites();

            // Initialize particle systems
            initParticleSystems();

            // Start cinematic animation loop
            animate();

            console.log('🎬 TRON CINEMA LEVEL: Gem Bot Universe initialized with Disney-level visuals!');
        }

        // TRON CINEMA LIGHTING
        function setupTronLighting() {
            // Primary directional light (blue-white, cinematic)
            const directionalLight = new THREE.DirectionalLight(0x00ffff, 2);
            directionalLight.position.set(10, 20, 5);
            directionalLight.castShadow = true;
            directionalLight.shadow.mapSize.width = 2048;
            directionalLight.shadow.mapSize.height = 2048;
            directionalLight.shadow.camera.near = 0.5;
            directionalLight.shadow.camera.far = 50;
            directionalLight.shadow.camera.left = -20;
            directionalLight.shadow.camera.right = 20;
            directionalLight.shadow.camera.top = 20;
            directionalLight.shadow.camera.bottom = -20;
            scene.add(directionalLight);

            // Secondary orange accent light
            const accentLight = new THREE.DirectionalLight(0xff6b35, 1);
            accentLight.position.set(-10, 10, -5);
            scene.add(accentLight);

            // Pink fill light
            const fillLight = new THREE.DirectionalLight(0xff1493, 0.8);
            fillLight.position.set(0, -5, 10);
            scene.add(fillLight);

            // Ambient light with subtle blue tint
            const ambientLight = new THREE.AmbientLight(0x001122, 0.3);
            scene.add(ambientLight);

            // Point lights for dramatic effect
            const pointLight1 = new THREE.PointLight(0x00ffff, 2, 50);
            pointLight1.position.set(15, 25, 0);
            scene.add(pointLight1);

            const pointLight2 = new THREE.PointLight(0xff1493, 2, 50);
            pointLight2.position.set(-15, 25, 0);
            scene.add(pointLight2);
        }

        // TRON GRID FLOOR - ICONIC VISUAL
        function createTronGrid() {
            const gridSize = 200;
            const gridDivisions = 100;

            // Main grid geometry
            const gridGeometry = new THREE.PlaneGeometry(gridSize, gridSize, gridDivisions, gridDivisions);

            // Custom shader material for TRON grid effect
            const gridMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    time: { value: 0 },
                    color1: { value: new THREE.Color(0x00ffff) },
                    color2: { value: new THREE.Color(0xff1493) },
                    opacity: { value: 0.6 }
                },
                vertexShader: `
                    varying vec2 vUv;
                    varying vec3 vPosition;
                    void main() {
                        vUv = uv;
                        vPosition = position;
                        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                    }
                `,
                fragmentShader: `
                    uniform float time;
                    uniform vec3 color1;
                    uniform vec3 color2;
                    uniform float opacity;
                    varying vec2 vUv;
                    varying vec3 vPosition;

                    void main() {
                        float grid = step(0.98, sin(vUv.x * 100.0)) + step(0.98, sin(vUv.y * 100.0));
                        vec3 color = mix(color1, color2, sin(time + vPosition.x * 0.01 + vPosition.z * 0.01) * 0.5 + 0.5);
                        gl_FragColor = vec4(color, grid * opacity);
                    }
                `,
                transparent: true,
                side: THREE.DoubleSide,
                blending: THREE.AdditiveBlending
            });

            const grid = new THREE.Mesh(gridGeometry, gridMaterial);
            grid.rotation.x = -Math.PI / 2;
            grid.position.y = -5;
            grid.receiveShadow = true;
            scene.add(grid);

            // Store reference for animation
            grid.userData.material = gridMaterial;
        }

        // ENHANCED EARTH WITH TRON AESTHETICS
        function createEnhancedEarth() {
            const earthGeometry = new THREE.SphereGeometry(5, 64, 64);

            // Multi-layered material for TRON effect
            const earthMaterial = new THREE.MeshPhongMaterial({
                transparent: true,
                opacity: 0.8,
                emissive: new THREE.Color(0x001122),
                emissiveIntensity: 0.2
            });

            earth = new THREE.Mesh(earthGeometry, earthMaterial);
            earth.castShadow = true;
            earth.receiveShadow = true;
            scene.add(earth);

            // Add glowing wireframe overlay
            const wireframeGeometry = new THREE.SphereGeometry(5.1, 32, 32);
            const wireframeMaterial = new THREE.MeshBasicMaterial({
                color: 0x00ffff,
                wireframe: true,
                transparent: true,
                opacity: 0.3
            });
            const wireframe = new THREE.Mesh(wireframeGeometry, wireframeMaterial);
            earth.add(wireframe);

            // Load Earth texture with enhanced quality
            const textureLoader = new THREE.TextureLoader();
            textureLoader.load(
                'https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg',
                function(texture) {
                    texture.wrapS = THREE.RepeatWrapping;
                    texture.wrapT = THREE.RepeatWrapping;
                    earthMaterial.map = texture;
                    earthMaterial.needsUpdate = true;
                },
                undefined,
                function(error) {
                    // Fallback with procedural TRON-style material
                    createTronEarthMaterial();
                }
            );
        }

        // Fallback TRON Earth material
        function createTronEarthMaterial() {
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 256;
            const ctx = canvas.getContext('2d');

            // Create procedural TRON-style texture
            const imageData = ctx.createImageData(512, 256);
            for (let i = 0; i < imageData.data.length; i += 4) {
                const x = (i / 4) % 512;
                const y = Math.floor((i / 4) / 512);

                const noise = Math.sin(x * 0.01) * Math.cos(y * 0.01);
                const value = (noise + 1) * 127;

                imageData.data[i] = value * 0.5;     // R
                imageData.data[i + 1] = value * 0.8; // G
                imageData.data[i + 2] = value;       // B
                imageData.data[i + 3] = 255;         // A
            }

            ctx.putImageData(imageData, 0, 0);
            const texture = new THREE.CanvasTexture(canvas);
            earth.material.map = texture;
            earth.material.needsUpdate = true;
        }

        // CINEMATIC CONTROLS
        function setupCinematicControls() {
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enablePan = false;
            controls.minDistance = 10;
            controls.maxDistance = 50;
            controls.maxPolarAngle = Math.PI * 0.6;

            // Add cinematic presets
            controls.userData.presets = {
                overview: { position: new THREE.Vector3(0, 25, 0), target: new THREE.Vector3(0, 0, 0) },
                closeup: { position: new THREE.Vector3(0, 8, 15), target: new THREE.Vector3(0, 0, 0) },
                dramatic: { position: new THREE.Vector3(20, 15, 20), target: new THREE.Vector3(0, 0, 0) }
            };
        }

        // TRON-STYLE SATELLITES
        function createTronSatellites() {
            const environments = [
                { name: 'Laboratory', color: 0x00ff88, icon: '🏭' },
                { name: 'Warehouse', color: 0xffaa00, icon: '🏗️' },
                { name: 'Explorer', color: 0x66ff99, icon: '🗺️' },
                { name: 'Exchange', color: 0x3399ff, icon: '⚔️' }
            ];

            environments.forEach((env, index) => {
                const angle = (index / environments.length) * Math.PI * 2;
                const radius = 15;

                // TRON-style satellite with glowing effects
                const geometry = new THREE.OctahedronGeometry(1.5, 0);
                const material = new THREE.MeshPhongMaterial({
                    color: env.color,
                    emissive: new THREE.Color(env.color).multiplyScalar(0.3),
                    transparent: true,
                    opacity: 0.9,
                    shininess: 100
                });

                const satellite = new THREE.Mesh(geometry, material);
                satellite.position.x = Math.cos(angle) * radius;
                satellite.position.z = Math.sin(angle) * radius;
                satellite.position.y = Math.sin(Date.now() * 0.001 + angle) * 2; // Floating motion
                satellite.userData = { name: env.name, color: env.color, angle, radius };

                // Add glowing ring
                const ringGeometry = new THREE.RingGeometry(2, 2.2, 16);
                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: env.color,
                    transparent: true,
                    opacity: 0.5,
                    side: THREE.DoubleSide
                });
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.rotation.x = Math.PI / 2;
                satellite.add(ring);

                scene.add(satellite);
                satellites.push(satellite);

                // Create enhanced label
                createTronLabel(satellite, env.name, env.icon, angle, radius);
            });
        }

        // TRON-STYLE LABELS
        function createTronLabel(satellite, name, icon, angle, radius) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 256;
            canvas.height = 80;

            // TRON-style background
            const gradient = ctx.createLinearGradient(0, 0, 256, 0);
            gradient.addColorStop(0, 'rgba(0, 255, 255, 0.9)');
            gradient.addColorStop(1, 'rgba(255, 20, 147, 0.9)');

            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Glowing border
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 2;
            ctx.strokeRect(2, 2, canvas.width - 4, canvas.height - 4);

            // Text with glow effect
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 16px monospace';
            ctx.textAlign = 'center';

            // Icon
            ctx.fillText(icon, canvas.width / 2, 25);

            // Name
            ctx.fillText(name, canvas.width / 2, 55);

            const texture = new THREE.CanvasTexture(canvas);
            const spriteMaterial = new THREE.SpriteMaterial({
                map: texture,
                transparent: true
            });
            const sprite = new THREE.Sprite(spriteMaterial);

            sprite.position.x = Math.cos(angle) * (radius + 2);
            sprite.position.z = Math.sin(angle) * (radius + 2);
            sprite.position.y = 2;
            sprite.scale.set(6, 1.5, 1);

            scene.add(sprite);
            labels.push(sprite);
        }

        // PARTICLE SYSTEMS FOR CINEMATIC EFFECT
        function initParticleSystems() {
            // Floating data particles
            const particleGeometry = new THREE.BufferGeometry();
            const particleCount = 1000;
            const positions = new Float32Array(particleCount * 3);

            for (let i = 0; i < particleCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 100;     // x
                positions[i + 1] = Math.random() * 30;          // y
                positions[i + 2] = (Math.random() - 0.5) * 100; // z
            }

            particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

            const particleMaterial = new THREE.PointsMaterial({
                color: 0x00ffff,
                size: 0.5,
                transparent: true,
                opacity: 0.6,
                blending: THREE.AdditiveBlending
            });

            const particles = new THREE.Points(particleGeometry, particleMaterial);
            scene.add(particles);

            // Store for animation
            scene.userData.particles = particles;
        }

        function createSatellites() {
            const environments = [
                { name: 'Laboratory', color: 0x00ff88, url: 'laboratory.html' },
                { name: 'Warehouse', color: 0xffaa00, url: 'warehouse.html' },
                { name: 'Explorer', color: 0x66ff99, url: 'outdoor.html' },
                { name: 'Exchange', color: 0x3399ff, url: 'grand-exchange.html' }
            ];

            environments.forEach((env, index) => {
                const angle = (index / environments.length) * Math.PI * 2;
                const radius = 11;

                // Create satellite
                const geometry = new THREE.SphereGeometry(1, 16, 16);
                const material = new THREE.MeshPhongMaterial({
                    color: env.color,
                    emissive: new THREE.Color(env.color).multiplyScalar(0.2)
                });

                const satellite = new THREE.Mesh(geometry, material);
                satellite.position.x = Math.cos(angle) * radius;
                satellite.position.z = Math.sin(angle) * radius;
                satellite.userData = { name: env.name, url: env.url };

                scene.add(satellite);
                satellites.push(satellite);

                // Create label
                createSatelliteLabel(satellite, env.name, angle, radius);
            });
        }

        function createSatelliteLabel(satellite, name, angle, radius) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 256;
            canvas.height = 64;

            ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00ffff';
            ctx.font = 'bold 20px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText(name, canvas.width / 2, canvas.height / 2 + 7);

            const texture = new THREE.CanvasTexture(canvas);
            const spriteMaterial = new THREE.SpriteMaterial({ map: texture, transparent: true });
            const sprite = new THREE.Sprite(spriteMaterial);

            sprite.position.x = Math.cos(angle) * (radius + 1.5);
            sprite.position.z = Math.sin(angle) * (radius + 1.5);
            sprite.position.y = 0.5;
            sprite.scale.set(4, 1, 1);

            scene.add(sprite);
            labels.push(sprite);
        }

        function animate() {
            requestAnimationFrame(animate);

            if (earth) {
                earth.rotation.y += 0.005;
            }

            // Rotate satellites
            satellites.forEach((satellite, index) => {
                const time = Date.now() * 0.0005;
                const baseAngle = (index / satellites.length) * Math.PI * 2;
                const angle = baseAngle + time;

                satellite.position.x = Math.cos(angle) * 11;
                satellite.position.z = Math.sin(angle) * 11;

                // Update label position
                if (labels[index]) {
                    const label = labels[index];
                    label.position.x = Math.cos(angle) * 12.5;
                    label.position.z = Math.sin(angle) * 12.5;
                    label.lookAt(camera.position);
                }
            });

            if (controls) {
                controls.update();
            }

            renderer.render(scene, camera);
        }

        // Navigation Functions
        function toggleMissionControl() {
            const panel = document.getElementById('missionControl');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        function navigateTo(destination) {
            // Update URL structure for proper navigation
            const baseUrl = '/GemBotUniverse/';
            window.location.href = baseUrl + destination + '.html';
        }

        // Agent Portal Functions
        function openAustinPortal() {
            alert('🏆 AUSTIN MOORE SUPREME INVENTOR PORTAL\n\nWelcome to the original creator\'s domain!\n\n• Access to all invention documentation\n• Direct communication with Austin\n• Exclusive inventor insights\n• Original design specifications\n\nAustin Moore: The mind behind MGC Merlin\'s Gem Bot');
        }

        function openAryaPortal() {
            alert('🎨 ARYA ENHANCEMENT SPECIALIST PORTAL\n\nWelcome to the art-technology fusion hub!\n\n• Advanced enhancement techniques\n• Creative technology integration\n• Physical Gem Bot troubleshooting\n• Educational content creation\n\nArya: Bridging art and technology');
        }

        function openAndyPortal() {
            alert('🧠 ANDY ACKER KNOWLEDGE BASE PORTAL\n\nWelcome to the quality assurance domain!\n\n• Testing methodologies\n• System validation protocols\n• Performance monitoring\n• Quality assurance frameworks\n\nAndy Acker: Ensuring excellence in every system');
        }

        function openRyanPortal() {
            alert('⚡ RYAN BARBRICK VISION ARCHITECT PORTAL\n\nWelcome to the system integration hub!\n\n• Platform architecture\n• Future technology integration\n• Knowledge base development\n• System optimization\n\nRyan Barbrick: Building the future of innovation');
        }

        // Education System
        function openEducation() {
            alert('🎓 COMPREHENSIVE EDUCATION SYSTEM\n\nComplete Learning Curriculum:\n\nPhase 1: Learn from the Inventors\n• Austin Moore\'s original work\n• Arya\'s enhancement techniques\n• Andy\'s quality assurance\n• Ryan\'s system architecture\n\nPhase 2: Hands-on Training\n• Interactive tutorials\n• Real-world applications\n• Advanced techniques\n\nPhase 3: Community Integration\n• Collaborative projects\n• Knowledge sharing\n• Innovation networks');
        }

        // IP Framework
        function openIPFramework() {
            alert('📋 INTELLECTUAL PROPERTY FRAMEWORK\n\nProvisional Patent: GEMBOT-2025-001\n\nProtected Innovations:\n• AI-driven interactive 3D environments\n• NFT jewelry transformation systems\n• Multi-agent collaboration frameworks\n• Comprehensive educational platforms\n• Intellectual property attribution systems\n\nContributors: Ryan Barbrick, Austin Moore, Arya, Andy Acker\n\nAll innovations legally protected and properly attributed.');
        }

        // Wizard Mode
        function activateWizardMode() {
            wizardMode = !wizardMode;
            if (wizardMode) {
                createWizards();
                alert('🎭 WIZARD MODE ACTIVATED\n\nMystical AI assistants now roam the universe!\n\n• Austin Moore (Orange): Invention wisdom\n• Arya (Pink): Enhancement guidance\n• Andy Acker (Blue): Quality insights\n• Ryan Barbrick (Gold): Vision architecture\n\nWatch for their glowing avatars and helpful tips!');

                // Award XP for activating wizard mode
                ['austin', 'arya', 'andy', 'ryan'].forEach(agent => addXP(agent, 2, 'wizardMaster'));
            } else {
                removeWizards();
                alert('🎭 WIZARD MODE DEACTIVATED\n\nAI assistants have returned to their ethereal realm.');
            }
        }

        function createWizards() {
            const wizardData = [
                { name: 'Austin Moore', color: 0xff6b35, position: { x: -10, y: 6, z: 8 } },
                { name: 'Arya', color: 0xff1493, position: { x: 10, y: 4, z: -8 } },
                { name: 'Andy Acker', color: 0x4169E1, position: { x: 0, y: 8, z: 0 } },
                { name: 'Ryan Barbrick', color: 0xffd700, position: { x: 0, y: 6, z: 10 } }
            ];

            wizardData.forEach(data => {
                const geometry = new THREE.OctahedronGeometry(1, 0);
                const material = new THREE.MeshPhongMaterial({
                    color: data.color,
                    emissive: new THREE.Color(data.color).multiplyScalar(0.3),
                    transparent: true,
                    opacity: 0.8
                });

                const wizard = new THREE.Mesh(geometry, material);
                wizard.position.set(data.position.x, data.position.y, data.position.z);
                wizard.userData = { name: data.name, tipCount: 0 };

                scene.add(wizard);
                wizards.push(wizard);
            });
        }

        function removeWizards() {
            wizards.forEach(wizard => {
                scene.remove(wizard);
            });
            wizards = [];
        }

        // System Diagnostics
        function runSystemDiagnostics() {
            alert('🔍 SYSTEM DIAGNOSTICS COMPLETE\n\n✅ AI Core: Operational\n✅ 3D Rendering: Active\n✅ Agent Network: Connected\n✅ Knowledge Base: Loaded\n✅ IP Framework: Protected\n✅ Wizard System: Ready\n✅ Navigation: Functional\n✅ Security: Enabled\n\nAll systems operating at optimal performance.\n\nGem Bot Universe is fully operational and ready for innovation!');
        }

        // AI Functions
        function setApiKey() {
            const key = document.getElementById('apiKeyInput').value;
            if (key) {
                window.securityManager.setApiKey('openai', key);
                window.openAIOrchestrator.setApiKey(key);
                alert('✅ API Key Set Successfully');
                document.getElementById('apiKeyInput').value = '';
            } else {
                alert('❌ Please enter an API key');
            }
        }

        async function sendPrompt() {
            const agent = document.getElementById('agentSelect').value;
            const prompt = document.getElementById('promptInput').value;
            const responseArea = document.getElementById('responseArea');
            
            if (!prompt) {
                responseArea.textContent = '❌ Please enter a prompt';
                return;
            }
            
            if (!window.openAIOrchestrator.apiKey) {
                responseArea.textContent = '❌ Please set your OpenAI API key first';
                return;
            }
            
            responseArea.textContent = '⏳ Processing...';
            
            try {
                const result = await window.openAIOrchestrator.executeAgentAction(agent, 'reason', { prompt });
                responseArea.textContent = result.choices[0].message.content;

                // Award XP for successful interaction
                addXP(agent, 5, 'firstInteraction');

            } catch (error) {
                responseArea.textContent = `❌ Error: ${error.message}`;
            }
        }

        // Tutorial functions
        function showTutorial(type) {
            const tutorials = {
                navigation: '🎥 **3D Navigation Tutorial**\n\n1. **Orbit**: Click and drag to rotate around Earth\n2. **Zoom**: Scroll wheel to zoom in/out\n3. **Satellites**: Click orbiting satellites to visit realms\n4. **Controls**: Use mouse for full 3D interaction\n\nWatch the embedded video for visual guide!',
                ai: '🤖 **AI Agent Tutorial**\n\n1. **Select Agent**: Choose from Governor, Scout, Archivist, Artist\n2. **Set API Key**: Enter your OpenAI key securely\n3. **Enter Prompt**: Type your question or request\n4. **Get Response**: Receive AI-powered assistance\n\nEach agent specializes in different tasks!',
                trading: '⚔️ **Grand Exchange Tutorial**\n\n1. **Navigate**: Go to Grand Exchange satellite\n2. **Select Items**: Browse NFTs and tokens\n3. **Place Orders**: Buy/sell with crypto payments\n4. **Multi-chain**: Support for ETH, SOL, and more\n\nMaster the art of Web3 trading!'
            };
            
            alert(tutorials[type] || 'Tutorial coming soon!');
        }

        // Sora 2 Embodiment Functions
        const soraVideos = {
            austin: 'https://www.youtube.com/embed/dQw4w9WgXcQ', // Placeholder - would be Sora-generated video
            arya: 'https://www.youtube.com/embed/dQw4w9WgXcQ',
            andy: 'https://www.youtube.com/embed/dQw4w9WgXcQ',
            ryan: 'https://www.youtube.com/embed/dQw4w9WgXcQ'
        };

        // Track active embodiments
        const activeEmbodiments = {
            austin: false,
            arya: false,
            andy: false,
            ryan: false
        };

        function updateEmbodimentIndicators() {
            // Update visual indicators for each agent
            Object.keys(activeEmbodiments).forEach(agent => {
                const indicator = document.getElementById(`${agent}-status`);
                if (indicator) {
                    indicator.textContent = activeEmbodiments[agent] ? '● ACTIVE' : '○ INACTIVE';
                    indicator.style.color = activeEmbodiments[agent] ? '#00ff88' : '#666';
                }
            });
        }

        function activateAustinHelper() {
            activeEmbodiments.austin = true;
            updateEmbodimentIndicators();
            activateSoraFeed('austin');
            alert('🎥 **Austin Moore Sora 2 Embodiment Activated**\n\nSupreme Inventor is now live! Watch as Austin demonstrates invention techniques and provides real-time guidance.\n\n• Live video feed from Sora 2\n• Real-time interaction\n• Invention demonstrations\n• Technical expertise');
        }

        function activateAryaHelper() {
            activeEmbodiments.arya = true;
            updateEmbodimentIndicators();
            activateSoraFeed('arya');
            alert('🎥 **Arya Sora 2 Embodiment Activated**\n\nEnhancement Specialist is now live! Experience Arya\'s art-technology fusion in real-time.\n\n• Live enhancement demos\n• Creative guidance\n• Technical troubleshooting\n• Artistic inspiration');
        }

        function activateAndyHelper() {
            activeEmbodiments.andy = true;
            updateEmbodimentIndicators();
            activateSoraFeed('andy');
            alert('🎥 **Andy Acker Sora 2 Embodiment Activated**\n\nKnowledge Base Agent is now live! Andy shares quality assurance insights and testing methodologies.\n\n• Live testing demonstrations\n• Quality assurance guidance\n• Performance monitoring\n• Knowledge sharing');
        }

        function activateRyanHelper() {
            activeEmbodiments.ryan = true;
            updateEmbodimentIndicators();
            activateSoraFeed('ryan');
            alert('🎥 **Ryan Barbrick Sora 2 Embodiment Activated**\n\nVision Architect is now live! Experience system integration and future technology visions.\n\n• Live architecture demos\n• System integration guidance\n• Future technology insights\n• Platform optimization');
        }

        function activateSoraFeed(agent) {
            const placeholder = document.getElementById(`${agent}-video`);
            const video = document.getElementById(`${agent}-sora-video`);
            
            if (video.src) {
                video.style.display = 'block';
                placeholder.style.display = 'none';
            } else {
                // Simulate loading Sora-generated video
                video.src = soraVideos[agent];
                setTimeout(() => {
                    video.style.display = 'block';
                    placeholder.style.display = 'none';
                }, 2000);
            }
        }

        // Chat functions for embodiments
        async function chatWithAustin() {
            const prompt = prompt('💬 Chat with Austin Moore:\n\nWhat invention or technical guidance do you need?');
            if (prompt) {
                document.getElementById('agentSelect').value = 'governor';
                document.getElementById('promptInput').value = `Austin, as the Supreme Inventor: ${prompt}`;
                await sendPrompt();
            }
        }

        async function chatWithArya() {
            const prompt = prompt('💬 Chat with Arya:\n\nWhat enhancement or creative guidance do you need?');
            if (prompt) {
                document.getElementById('agentSelect').value = 'artist';
                document.getElementById('promptInput').value = `Arya, as the Enhancement Specialist: ${prompt}`;
                await sendPrompt();
            }
        }

        async function chatWithAndy() {
            const prompt = prompt('💬 Chat with Andy Acker:\n\nWhat knowledge or testing guidance do you need?');
            if (prompt) {
                document.getElementById('agentSelect').value = 'archivist';
                document.getElementById('promptInput').value = `Andy, as the Knowledge Base Agent: ${prompt}`;
                await sendPrompt();
            }
        }

        async function chatWithRyan() {
            const prompt = prompt('💬 Chat with Ryan Barbrick:\n\nWhat vision or architectural guidance do you need?');
            if (prompt) {
                document.getElementById('agentSelect').value = 'governor';
                document.getElementById('promptInput').value = `Ryan, as the Vision Architect: ${prompt}`;
                await sendPrompt();
            }
        }

        // Specialized guidance functions
        async function getAustinGuidance() {
            document.getElementById('agentSelect').value = 'governor';
            document.getElementById('promptInput').value = 'Austin, provide guidance on invention methodology and technical innovation strategies.';
            await sendPrompt();
        }

        async function getAryaEnhancement() {
            document.getElementById('agentSelect').value = 'artist';
            document.getElementById('promptInput').value = 'Arya, suggest enhancements for creative technology integration and artistic improvement.';
            await sendPrompt();
        }

        async function getAndyKnowledge() {
            document.getElementById('agentSelect').value = 'archivist';
            document.getElementById('promptInput').value = 'Andy, provide quality assurance knowledge and testing methodologies.';
            await sendPrompt();
        }

        async function getRyanVision() {
            document.getElementById('agentSelect').value = 'governor';
            document.getElementById('promptInput').value = 'Ryan, share vision for system architecture and future technology integration.';
            await sendPrompt();
        }

        // Wizard Embodiment Linking
        function linkWizardToEmbodiment(agentName, embodimentActive) {
            // Link 3D wizard visibility to Sora embodiment status
            const wizardIndex = ['austin', 'arya', 'andy', 'ryan'].indexOf(agentName);
            if (wizardIndex !== -1 && wizards[wizardIndex]) {
                wizards[wizardIndex].visible = embodimentActive;
                console.log(`${agentName} wizard ${embodimentActive ? 'activated' : 'deactivated'}`);
            }
        }

        // Agent Customization
        const agentCustomizations = {
            austin: { costume: 'wizard', color: '#ff6b35', level: 1, xp: 0, achievements: [] },
            arya: { costume: 'creative', color: '#ff1493', level: 1, xp: 0, achievements: [] },
            andy: { costume: 'scientist', color: '#4169E1', level: 1, xp: 0, achievements: [] },
            ryan: { costume: 'business', color: '#00ff88', level: 1, xp: 0, achievements: [] }
        };

        // Achievement System
        const achievements = {
            firstInteraction: { name: 'First Contact', description: 'Interacted with an agent for the first time', xp: 10, icon: '👋' },
            contentCreator: { name: 'Content Creator', description: 'Generated 5 pieces of AI content', xp: 50, icon: '🎨' },
            wizardMaster: { name: 'Wizard Master', description: 'Activated wizard mode 10 times', xp: 25, icon: '🧙‍♂️' },
            embodimentWatcher: { name: 'Embodiment Watcher', description: 'Watched all Sora embodiments', xp: 30, icon: '👁️' },
            libraryCurator: { name: 'Library Curator', description: 'Organized 10 items in content library', xp: 40, icon: '📚' },
            grandWizard: { name: 'Grand Wizard', description: 'Activated Grand Wizard Mode', xp: 100, icon: '👑' }
        };

        // XP and Level System
        function addXP(agent, amount, achievement = null) {
            if (!agentCustomizations[agent]) return;

            agentCustomizations[agent].xp += amount;

            // Check for level up
            const newLevel = Math.floor(agentCustomizations[agent].xp / 100) + 1;
            if (newLevel > agentCustomizations[agent].level) {
                agentCustomizations[agent].level = newLevel;
                showLevelUp(agent, newLevel);
            }

            // Add achievement if provided
            if (achievement && !agentCustomizations[agent].achievements.includes(achievement)) {
                agentCustomizations[agent].achievements.push(achievement);
                showAchievement(agent, achievement);
            }

            saveAgentCustomizations();
        }

        function showLevelUp(agent, level) {
            alert(`🎉 ${agent.charAt(0).toUpperCase() + agent.slice(1)} leveled up to Level ${level}!\n\nXP: ${agentCustomizations[agent].xp}\nNew powers unlocked!`);
        }

        function showAchievement(agent, achievementKey) {
            const achievement = achievements[achievementKey];
            if (achievement) {
                alert(`🏆 ACHIEVEMENT UNLOCKED!\n\n${achievement.icon} ${achievement.name}\n${achievement.description}\n\n+${achievement.xp} XP awarded!`);
            }
        }

        function applyAgentCustomization() {
            const agent = document.getElementById('agentSelector').value;
            const costume = document.getElementById('costumeSelect').value;
            const color = document.getElementById('colorPicker').value;

            // Preserve existing level, xp, and achievements
            const currentData = agentCustomizations[agent] || { level: 1, xp: 0, achievements: [] };
            agentCustomizations[agent] = {
                costume,
                color,
                level: currentData.level,
                xp: currentData.xp,
                achievements: currentData.achievements
            };

            saveAgentCustomizations();

            // Update 3D wizard appearance if active
            updateWizardAppearance(agent, costume, color);

            alert(`✅ ${agent.charAt(0).toUpperCase() + agent.slice(1)} appearance updated!\nCostume: ${costume}\nColor: ${color}\nLevel: ${currentData.level}\nXP: ${currentData.xp}`);
        }

        function updateWizardAppearance(agent, costume, color) {
            const agentIndex = ['austin', 'arya', 'andy', 'ryan'].indexOf(agent);
            if (agentIndex !== -1 && wizards[agentIndex]) {
                const wizard = wizards[agentIndex];
                wizard.material.color.setStyle(color);
                wizard.userData.costume = costume;
                console.log(`Updated ${agent} wizard appearance: ${costume}, ${color}`);
            }
        }

        // Grand Wizard Controls
        function activateAllEmbodiments() {
            Object.keys(activeEmbodiments).forEach(agent => {
                activeEmbodiments[agent] = true;
                activateSoraFeed(agent);
                linkWizardToEmbodiment(agent, true);
            });
            updateEmbodimentIndicators();
            alert('🎬 All Sora 2 embodiments activated!\nAll wizards are now live and interactive.');
        }

        function deactivateAllEmbodiments() {
            Object.keys(activeEmbodiments).forEach(agent => {
                activeEmbodiments[agent] = false;
                const video = document.getElementById(`${agent}-sora-video`);
                const placeholder = document.getElementById(`${agent}-video`);
                if (video) video.style.display = 'none';
                if (placeholder) placeholder.style.display = 'flex';
                linkWizardToEmbodiment(agent, false);
            });
            updateEmbodimentIndicators();
            alert('⏹️ All embodiments deactivated.\nWizards returned to ethereal realm.');
        }

        function regenerateAllSoraVideos() {
            alert('🔄 Sora 2 Video Regeneration\n\nThis would generate new custom videos for all agents based on their current customizations.\n\nFeature: Coming with Sora 2 API integration');
        }

        function syncAllWizards() {
            Object.keys(activeEmbodiments).forEach(agent => {
                linkWizardToEmbodiment(agent, activeEmbodiments[agent]);
            });
            alert('🔗 All wizards synchronized with embodiment status!\n3D wizards now reflect Sora feed activation state.');
        }

        function enterGrandWizardMode() {
            // Activate all systems as Grand Wizard
            activateAllEmbodiments();
            if (!wizardMode) activateWizardMode();
            
            // Enhanced permissions (would normally check wallet)
            alert('👑 GRAND WIZARD MODE ACTIVATED!\n\nYou are now the supreme ruler of all realms!\n\n• Control all agent embodiments\n• Command the 3D wizard council\n• Access to all realm secrets\n• Unlimited customization power\n\nWelcome, Grand Wizard! ⚡🧙‍♂️');

            // Award massive XP for Grand Wizard achievement
            ['austin', 'arya', 'andy', 'ryan'].forEach(agent => addXP(agent, 10, 'grandWizard'));
        }

        // Status Dashboard
        function refreshWizardStatus() {
            const statusDiv = document.getElementById('wizardStatusDisplay');
            let status = '🎭 WIZARD REALM STATUS\n\n';

            status += 'SORA EMBODIMENTS:\n';
            Object.keys(activeEmbodiments).forEach(agent => {
                const statusIcon = activeEmbodiments[agent] ? '🟢 ACTIVE' : '🔴 INACTIVE';
                const custom = agentCustomizations[agent];
                status += `${agent.charAt(0).toUpperCase() + agent.slice(1)}: ${statusIcon} | Lv.${custom.level} (${custom.xp} XP)\n`;
            });

            status += '\n3D WIZARDS:\n';
            status += `Wizard Mode: ${wizardMode ? '🟢 ACTIVE' : '🔴 INACTIVE'}\n`;
            status += `Active Wizards: ${wizards.filter(w => w.visible).length}/4\n`;

            status += '\nACHIEVEMENTS:\n';
            Object.keys(agentCustomizations).forEach(agent => {
                const custom = agentCustomizations[agent];
                const achievementCount = custom.achievements.length;
                status += `${agent}: ${achievementCount} unlocked\n`;
            });

            statusDiv.textContent = status;
        }

        // Sora Video Customization
        function generateCustomSoraVideo() {
            const prompt = document.getElementById('soraPromptInput').value;
            const selectedAgent = document.getElementById('agentSelector').value;
            
            if (!prompt) {
                alert('❌ Please enter a video description prompt');
                return;
            }

            alert(`🎬 Custom Sora 2 Video Generation\n\nAgent: ${selectedAgent.charAt(0).toUpperCase() + selectedAgent.slice(1)}\n\nPrompt: "${prompt}"\n\nThis would generate a custom video embodiment using Sora 2 with your specified prompt.\n\nFeature: Ready for Sora 2 API integration`);
        }

        // Load customizations on page load
        function loadAgentCustomizations() {
            const saved = localStorage.getItem('agentCustomizations');
            if (saved) {
                const loaded = JSON.parse(saved);
                // Merge with defaults to ensure all properties exist
                Object.keys(agentCustomizations).forEach(agent => {
                    if (loaded[agent]) {
                        agentCustomizations[agent] = {
                            costume: loaded[agent].costume || agentCustomizations[agent].costume,
                            color: loaded[agent].color || agentCustomizations[agent].color,
                            level: loaded[agent].level || 1,
                            xp: loaded[agent].xp || 0,
                            achievements: loaded[agent].achievements || []
                        };
                    }
                });
            }
        }

        // Save customizations
        function saveAgentCustomizations() {
            localStorage.setItem('agentCustomizations', JSON.stringify(agentCustomizations));
        }

        // Content Library Functions
        function openContentLibrary() {
            if (!window.contentSharingManager) {
                alert('❌ Content sharing system not loaded');
                return;
            }

            const content = window.contentSharingManager.getContent();
            let libraryHTML = '📚 CONTENT LIBRARY\n\n';

            if (content.length === 0) {
                libraryHTML += 'No content available yet.\n\nGenerate some AI content or import existing items.';
            } else {
                content.forEach(item => {
                    libraryHTML += `📄 ${item.type.toUpperCase()}: ${item.metadata.category || 'General'}\n`;
                    libraryHTML += `   ID: ${item.id}\n`;
                    libraryHTML += `   Created: ${new Date(item.createdAt).toLocaleDateString()}\n`;
                    libraryHTML += `   By: ${item.creator}\n`;

                    if (item.type === 'images' && item.data.url) {
                        libraryHTML += `   Preview: ${item.data.url}\n`;
                    } else if (item.type === 'text' && item.data.response) {
                        libraryHTML += `   Response: ${item.data.response.substring(0, 100)}...\n`;
                    }

                    libraryHTML += '\n';
                });
            }

            alert(libraryHTML);
        }

        function refreshContentStats() {
            if (!window.contentSharingManager) {
                document.getElementById('contentStats').textContent = 'System not loaded';
                return;
            }

            const stats = window.contentSharingManager.getStats();
            const statsText = `Total: ${stats.totalItems}\nImages: ${stats.byType.images || 0}\nVideos: ${stats.byType.videos || 0}\nTutorials: ${stats.byType.tutorials || 0}\nText: ${stats.byType.text || 0}\n\nLast Updated: ${new Date(stats.lastUpdated).toLocaleString()}`;
            document.getElementById('contentStats').textContent = statsText;
        }

        function shareRecentContent() {
            if (!window.contentSharingManager) {
                alert('❌ Content sharing system not loaded');
                return;
            }

            const userId = document.getElementById('shareUserSelect').value;
            const recentContent = window.contentSharingManager.getContent().slice(0, 5); // Last 5 items

            if (recentContent.length === 0) {
                alert('No content available to share');
                return;
            }

            recentContent.forEach(item => {
                window.contentSharingManager.shareContent(item.id, [userId]);
            });

            alert(`✅ Shared ${recentContent.length} recent items with ${userId.charAt(0).toUpperCase() + userId.slice(1)}`);
        }

        function exportContentLibrary() {
            if (!window.contentSharingManager) {
                alert('❌ Content sharing system not loaded');
                return;
            }

            const libraryData = window.contentSharingManager.exportLibrary();
            const dataStr = JSON.stringify(libraryData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });

            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'gem-bot-content-library.json';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            alert('✅ Content library exported successfully!');
        }

        // Initialize content stats on load
        window.addEventListener('load', function() {
            console.log('🚀 Initializing Gem Bot Universe...');
            loadAgentCustomizations();
            refreshWizardStatus();
            refreshContentStats(); // Add this
            initScene();
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });
    </script>

    <footer>
        <p>&copy; 2025 Gem Bot Universe | AI-Driven Innovation Platform | All Rights Reserved</p>
    </footer>
</body>
</html>
