<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://barbrickdesign.github.io/">
    <meta name="twitter:title" content="BARBRICKDESIGN - Elite Web3 Hub">
    <meta name="twitter:description" content="Cutting-edge Web3 development and design solutions">
    <meta name="twitter:image" content="https://barbrickdesign.github.io/header.jpg">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://barbrickdesign.github.io/">
    <meta property="og:title" content="BARBRICKDESIGN - Elite Web3 Hub">
    <meta property="og:description" content="Cutting-edge Web3 development and design solutions">
    <meta property="og:image" content="https://barbrickdesign.github.io/header.jpg">
    <meta name="description" content="BARBRICKDESIGN - Elite Web3 Development and Design Hub">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https:;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Architect Dashboard | Agent R</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.95.8/lib/index.iife.min.js"></script>
    <script src="system-architect-auth.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #00ff00;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px;
            border: 2px solid #00ff00;
            border-radius: 10px;
            background: rgba(0, 255, 0, 0.05);
            margin-bottom: 30px;
        }
        
        h1 {
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
            margin-bottom: 10px;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .status-card {
            border: 1px solid #00ff00;
            padding: 20px;
            border-radius: 8px;
            background: rgba(0, 255, 0, 0.03);
        }
        
        .status-card h3 {
            color: #00ff00;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .status-value {
            font-size: 24px;
            color: #00ffff;
            margin: 10px 0;
        }
        
        .log-panel {
            border: 1px solid #00ff00;
            padding: 20px;
            border-radius: 8px;
            background: rgba(0, 255, 0, 0.03);
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 5px;
            margin: 5px 0;
            font-size: 12px;
            border-left: 2px solid #00ff00;
            padding-left: 10px;
        }
        
        .architect-badge {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(90deg, #00ff00, #00ffff);
            color: #000;
            font-weight: bold;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .btn {
            padding: 12px 24px;
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            color: #00ff00;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: rgba(0, 255, 0, 0.2);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }
        
        .blockchain-viewer {
            border: 1px solid #00ff00;
            padding: 20px;
            border-radius: 8px;
            background: rgba(0, 255, 0, 0.03);
            margin: 20px 0;
        }
        
        .block {
            border-left: 3px solid #00ff00;
            padding: 10px;
            margin: 10px 0;
            background: rgba(0, 255, 0, 0.05);
        }
        
        .hash {
            color: #00ffff;
            font-size: 11px;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ö° SYSTEM ARCHITECT DASHBOARD</h1>
            <div class="architect-badge">Agent R - Supreme Authority</div>
            <p style="color: #00ff00; margin-top: 10px;">
                Creator of Mandem.OS | Null.OS | Gem Bot Universe
            </p>
        </header>

        <!-- Status Grid -->
        <div class="status-grid">
            <div class="status-card">
                <h3>SESSION STATUS</h3>
                <div class="status-value" id="sessionStatus">INITIALIZING...</div>
                <div style="font-size: 12px; color: #00ff00;" id="sessionId">-</div>
            </div>
            
            <div class="status-card">
                <h3>DATA FLOWS</h3>
                <div class="status-value" id="dataFlows">0</div>
                <div style="font-size: 12px; color: #00ff00;">Active: <span id="activeFlows">0</span></div>
            </div>
            
            <div class="status-card">
                <h3>BLOCKCHAIN</h3>
                <div class="status-value" id="blockCount">0</div>
                <div style="font-size: 12px; color: #00ff00;">Blocks Verified</div>
            </div>
            
            <div class="status-card">
                <h3>UPTIME</h3>
                <div class="status-value" id="uptime">00:00:00</div>
                <div style="font-size: 12px; color: #00ff00;">Session Active</div>
            </div>
        </div>

        <!-- Controls -->
        <div style="text-align: center; margin: 30px 0;">
            <button class="btn" onclick="verifyIdentity()">üîê Verify Identity</button>
            <button class="btn" onclick="refreshStatus()">üîÑ Refresh Status</button>
            <button class="btn" onclick="exportAudit()">üìä Export Audit</button>
            <button class="btn" onclick="verifyBlockchain()">‚õìÔ∏è Verify Blockchain</button>
        </div>

        <!-- Live Data Logs -->
        <div class="log-panel">
            <h3 style="color: #00ff00; margin-bottom: 15px;">üìä LIVE DATA FLOWS & TIMESTAMPS</h3>
            <div id="liveLog"></div>
        </div>

        <!-- Blockchain Viewer -->
        <div class="blockchain-viewer">
            <h3 style="color: #00ff00; margin-bottom: 15px;">‚õìÔ∏è BLOCKCHAIN LOG (Last 10 Blocks)</h3>
            <div id="blockchainView"></div>
        </div>

        <!-- Navigation -->
        <div style="text-align: center; margin-top: 40px;">
            <a href="classified-contracts.html" style="color: #00ff00;">‚Üê Back to Classified Contracts</a> |
            <a href="contractor-leaderboard.html" style="color: #00ff00;">Contractor Leaderboard</a> |
            <a href="index.html" style="color: #00ff00;">Main Hub</a>
        </div>
    </div>

    <script>
        const auth = window.systemArchitectAuth;
        let updateInterval;

        // Auto-verify on load
        window.addEventListener('load', async () => {
            await autoVerify();
            startUpdates();
        });

        async function autoVerify() {
            // Try MetaMask
            if (window.ethereum && window.ethereum.selectedAddress) {
                const result = await auth.verifyArchitect(window.ethereum.selectedAddress);
                if (result.success) {
                    ');
                    updateDashboard();
                    return;
                }
            }
            
            // Try Phantom
            if (window.solana && window.solana.isConnected) {
                const result = await auth.verifyArchitect(window.solana.publicKey.toBase58());
                if (result.success) {
                    ');
                    updateDashboard();
                    return;
                }
            }
            
            document.getElementById('sessionStatus').textContent = 'NOT AUTHENTICATED';
            document.getElementById('sessionStatus').style.color = '#ff0000';
        }

        async function verifyIdentity() {
            // Try both wallets
            let result = null;
            
            if (window.ethereum) {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                result = await auth.verifyArchitect(accounts[0]);
            } else if (window.solana) {
                const resp = await window.solana.connect();
                result = await auth.verifyArchitect(resp.publicKey.toBase58());
            }
            
            if (result && result.success) {
                alert('‚úÖ System Architect Verified!\n\n' + 
                      `Authority: ${result.authority}\n` +
                      `Access: ${result.access}`);
                updateDashboard();
            } else {
                alert('‚ùå Not System Architect wallet');
            }
        }

        function updateDashboard() {
            const status = auth.getSecurityStatus();
            
            // Session Status
            document.getElementById('sessionStatus').textContent = 'ACTIVE ‚úì';
            document.getElementById('sessionStatus').style.color = '#00ff00';
            document.getElementById('sessionId').textContent = `ID: ${status.session.id.slice(0, 16)}...`;
            
            // Data Flows
            document.getElementById('dataFlows').textContent = status.dataFlows.total;
            document.getElementById('activeFlows').textContent = status.dataFlows.active;
            
            // Blockchain
            document.getElementById('blockCount').textContent = status.blockchain.blocks;
            
            // Uptime
            const uptime = Math.floor(status.session.uptime / 1000);
            const hours = Math.floor(uptime / 3600);
            const minutes = Math.floor((uptime % 3600) / 60);
            const seconds = uptime % 60;
            document.getElementById('uptime').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            // Update logs
            updateLiveLogs();
            updateBlockchainView();
        }

        function updateLiveLogs() {
            const logDiv = document.getElementById('liveLog');
            const logs = auth.timeLogs.slice(-20).reverse(); // Last 20 logs
            
            logDiv.innerHTML = logs.map(log => 
                `<div class="log-entry">[${log.time}] ${log.event} - ${log.hash.slice(0, 12)}...</div>`
            ).join('');
        }

        function updateBlockchainView() {
            const blockDiv = document.getElementById('blockchainView');
            const blocks = auth.blockchainLog.slice(-10).reverse(); // Last 10 blocks
            
            blockDiv.innerHTML = blocks.map(block => `
                <div class="block">
                    <strong>Block #${block.index}</strong> - ${new Date(block.timestamp).toLocaleTimeString()}
                    <div class="hash">Hash: ${block.hash}</div>
                    <div style="font-size: 11px; color: #00ff00; margin-top: 5px;">
                        Event: ${block.data.event || 'Genesis'}
                    </div>
                </div>
            `).join('');
        }

        function startUpdates() {
            // Update dashboard every 2 seconds
            updateInterval = setInterval(updateDashboard, 2000);
        }

        function refreshStatus() {
            updateDashboard();
            }

        function exportAudit() {
            const audit = auth.exportAuditData();
            const json = JSON.stringify(audit, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `architect-audit-${Date.now()}.json`;
            a.click();
            }

        function verifyBlockchain() {
            const verified = auth.verifyBlockchainIntegrity();
            if (verified) {
                alert('‚úÖ Blockchain Integrity Verified!\n\n' +
                      `Total Blocks: ${auth.blockchainLog.length}\n` +
                      `All hashes verified\n` +
                      `Chain intact`);
            } else {
                alert('‚ùå Blockchain Integrity Compromised!');
            }
        }
    </script>
</body>
</html>
